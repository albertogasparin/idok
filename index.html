<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Idok by metal3d</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">Idok</h1>
        <p class="header">A simple command line to stream media to kodi (aka xbmc)</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/metal3d/idok/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/metal3d/idok/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/metal3d/idok">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/metal3d">metal3d</a></p>


      </header>
      <section>
        <h1>
<a name="what-is-it-" class="anchor" href="#what-is-it-"><span class="octicon octicon-link"></span></a>What is it ?</h1>

<p>IDOK (kodi reversed name) is a Go program that allows to serve medias to your Kodi plateform (raspbmc, xbmc...)</p>

<p>You may be able to send video, images and music from your computer.</p>

<p>Idok has got two modes:</p>

<ul>
<li>your computer serve media from a standard port (default 8080)</li>
<li>your computer dig a tunnel and serve media</li>
</ul><h1>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h1>

<h2>
<a name="install-distribution" class="anchor" href="#install-distribution"><span class="octicon octicon-link"></span></a>Install distribution</h2>

<p>Linux users can use the auto-install:</p>

<pre><code>bash &lt;(wget http://dists.metal3d.org/install-idok.sh -qO -)
</code></pre>

<p>Or with curl:</p>

<pre><code>bash &lt;(curl http://dists.metal3d.org/install-idok.sh)
</code></pre>

<p>Check that ~/.local/bin is in your PATH. Then try to call:</p>

<pre><code>idok -h
</code></pre>

<p>If you want to get yourself the packed file for Linux, here are the urls:</p>

<ul>
<li>
<a href="http://dists.metal3d.org/idok-x86_64.gz">http://dists.metal3d.org/idok-x86_64.gz</a> for 64 bits </li>
<li>
<a href="http://dists.metal3d.org/idok-x686.gz">http://dists.metal3d.org/idok-x686.gz</a> for 32 bits </li>
</ul><p>That command could not work with MacOSX. You can get the gziped binary there: 
<a href="http://dists.metal3d.org/idok-darwin.gz">http://dists.metal3d.org/idok-darwin.gz</a></p>

<p>Then gunzip the binary:</p>

<pre><code>gunzip idok-darwin.gz
</code></pre>

<p>(I need help for Mac because I don't have one and cannot be sure of how to install the command at the right path...)</p>

<p>Windows users can get exe: <a href="http://dists.metal3d.org/idok.zip">http://dists.metal3d.org/idok.zip</a>. The "idok.exe" file should be launched from command line (cmd command). </p>

<p>Windows users (again) may know that there is no graphical interface for the idok tool. Maybe one day...</p>

<p>If you have troubles, please fill an issue. But keep in mind that I don't have any Windows or Mac OSX installation. </p>

<h2>
<a name="install-from-source" class="anchor" href="#install-from-source"><span class="octicon octicon-link"></span></a>Install from source</h2>

<p>You can clone repository and compile source code yourself:</p>

<pre><code>git clone http://git.develipsum.com/metal3d/idok.git
cd idok
go build idok.go
</code></pre>

<p>Then you can put binary in your PATH:</p>

<pre><code>mkdir -p ~/.local/bin
cp idok ~/.local/bin
</code></pre>

<h2>
<a name="options" class="anchor" href="#options"><span class="octicon octicon-link"></span></a>Options</h2>

<p>You can now ask some help:</p>

<pre><code>idok -h
Usage of idok:
 -login="": jsonrpc login (configured in xbmc settings)
 -password="": jsonrpc password (configured in xbmc settings)
 -port=8080: local port (ignored if you use ssh option)
 -ssh=false: Use SSH Tunnelling (need ssh user and password)
 -sshpass="raspberry": ssh password
 -sshport=22: target ssh port
 -sshuser="pi": ssh login
 -target="": xbmc/kodi ip (raspbmc address, ip or hostname)
</code></pre>

<h1>
<a name="stream-your-first-media" class="anchor" href="#stream-your-first-media"><span class="octicon octicon-link"></span></a>Stream your first media</h1>

<h2>
<a name="http-default" class="anchor" href="#http-default"><span class="octicon octicon-link"></span></a>HTTP (default)</h2>

<p>The HTTP way is not secured. While you're streaming to Kodi (or XBMC), the media can be accessed by other computer in your network. That's not a big problem while you're not streaming important information (restricted video). </p>

<p>This solution need to open port on your firewall. </p>

<p>By default, idok opens 8080 port (http-alternative), but you can specify other port using "-port" option.</p>

<p>At first, you must be sure that the port is opened. To open firewall port on you linux installation:</p>

<pre><code>firewall-cmd --add-port=8080/tcp
</code></pre>

<p>When you will reload firewall, or restart computer, the port will be closed. If you want to keep that port opened:</p>

<pre><code>firewall-cmd --add-port=8080/tcp --permanent
</code></pre>

<p>Then, send media:</p>

<pre><code>idok -target=IP_OF_KODI_OR_XBMC /path/to/media.mp3
</code></pre>

<p>If you've opened other port, you can set it. For example for port 1234:</p>

<pre><code>idok -port=1234 -target=IP_OF_KODI_OR_XBMC /path/to/media.mp3
</code></pre>

<h2>
<a name="ssh" class="anchor" href="#ssh"><span class="octicon octicon-link"></span></a>SSH</h2>

<p>The SSH way is the easier and more secured way. Easier because you don't have to open port on your computer and only the Kodi instance will be able to access your content.</p>

<p>But... Unfortunately, raspbmc has a little problem with ssh server. But it's not very hard to fix but you'll had to do some configuration...</p>

<p>At first, the standard information that I must write:</p>

<p><strong>I will not be responsible about malfunction, bad usage or error. Follow instruction with caution and please make a backup before doing anything.</strong></p>

<p>Now that you know that, we can continue.</p>

<p>We will replace dropbear by openssh-server.</p>

<pre><code>$ ssh pi@YOUR_RASPBMC_IP
$ sudo nano /etc/default/dropbear
</code></pre>

<p>Change DROPBEAR_PORT value to "2222" then save by pressing CTRL+X then Y</p>

<p>Changing port before removing the dropbear server is secured. If openssh-server installation failed, you will be able to connect to RaspBMC using "-p 2222" with your ssh command line.</p>

<p>Now, install openssh-server:</p>

<pre><code>$ sudo apt-get update
$ sudo apt-get -y openssh-server
</code></pre>

<p>After installation, you should restart your raspberry</p>

<pre><code>$ sudo reboot
</code></pre>

<p>The next time you want to ssh your raspbmc, your computer will complain about fingerprint changes. Just open your ~/.ssh/known_hosts and remove the corresponding line for your raspberry ip.</p>

<p>That's it, you have finished openssh installation. Now try to send data:</p>

<pre><code>idok -ssh -target=IP_OF_RASPBERRY /path/to/media.mp3
</code></pre>

<p>Your kodi should open the file.</p>

<p>Pressing CTRL+C should stop media stream and exit program.</p>

<h1>
<a name="options-1" class="anchor" href="#options-1"><span class="octicon octicon-link"></span></a>Options</h1>

<p>There are other options that may be usefull:</p>

<ul>
<li>-target: kodi instance ip or hostname </li>
<li>-login : xbmc or kodi login configured on web interface settings</li>
<li>-password : xbmc or kodi password configured on web interface settings</li>
<li>-ssh : If set, idok will dig ssh tunnel to stream content</li>
<li>-sshuser : if you don't user "pi" user</li>
<li>-sshpass : if you changed standard password of "pi" user</li>
<li>-sshport : if you changed standard ssh port or to use other ssh server (default is 22)</li>
<li>-port : local port for media stream if you don't use ssh tunneling, default is 8080</li>
</ul><h1>
<a name="todo" class="anchor" href="#todo"><span class="octicon octicon-link"></span></a>TODO</h1>

<p>I should ask dropbear maintainer why the tunneling won't work. Installing openssh-server on raspbmc can be complicated for some users.</p>

<p>Add kodi/xbmc port option (some users changed the default 80) </p>
      </section>
      <footer>
        <p><small>Hosted on <a href="http://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		          <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-54490082-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
